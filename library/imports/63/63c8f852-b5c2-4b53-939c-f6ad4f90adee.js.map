{"version":3,"sources":["assets\\game\\scripts\\UI\\Item\\GameMaoziDrag.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,qFAAoF;AACpF,kDAAiD;AACjD,yCAAoC;AAG9B,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA2C,iCAAY;IAAvD;QAAA,qEAgDC;QA7CW,cAAQ,GAAc,EAAE,CAAC;QAEzB,WAAK,GAAW,CAAC,CAAC;QAElB,aAAO,GAAY,IAAI,CAAC;QACxB,gBAAU,GAAY,IAAI,CAAC;;IAwCvC,CAAC;IAtCG,8BAAM,GAAN;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC;QAClC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;IACvC,CAAC;IAEO,mCAAW,GAAnB,UAAoB,KAAK;QACrB,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IACzF,CAAC;IAEO,kCAAU,GAAlB,UAAmB,KAAK;QACpB,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACrF,iCAAe,CAAC,QAAQ,CAAC,qBAAS,CAAC,eAAe,EAAE,GAAG,CAAC,CAAC;IAC7D,CAAC;IAEO,iCAAS,GAAjB,UAAkB,KAAK;QAAvB,iBAcC;QAbG,IAAI,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACrF,IAAI,QAAQ,GAAY,KAAK,CAAC;QAC9B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,UAAA,IAAI;YACtB,IAAI,IAAI,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAC,WAAW,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE;gBAC/D,QAAQ,GAAG,IAAI,CAAC;gBAChB,IAAI,CAAC,YAAY,CAAC,mBAAS,CAAC,CAAC,IAAI,CAAC,KAAI,CAAC,IAAI,CAAC,CAAC;aAChD;QACL,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,EAAE;YACX,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;SACrC;QACD,iCAAe,CAAC,QAAQ,CAAC,qBAAS,CAAC,mBAAmB,CAAC,CAAC;IAC5D,CAAC;IAEM,6BAAK,GAAZ;QACI,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QACnC,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC;IACtC,CAAC;IAEM,gCAAQ,GAAf;QACI,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IA5CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;mDACe;IAEjC;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;gDACK;IALT,aAAa;QADjC,OAAO;OACa,aAAa,CAgDjC;IAAD,oBAAC;CAhDD,AAgDC,CAhD0C,EAAE,CAAC,SAAS,GAgDtD;kBAhDoB,aAAa","file":"","sourceRoot":"/","sourcesContent":["import { ListenerManager } from \"../../../../frame/scripts/Manager/ListenerManager\";\r\nimport { EventType } from \"../../Data/EventType\";\r\nimport GameMaozi from \"./GameMaozi\";\r\n\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class GameMaoziDrag extends cc.Component {\r\n\r\n    @property(cc.Node)\r\n    private fillArea: cc.Node[] = [];\r\n    @property(cc.Integer)\r\n    private index: number = 0;\r\n\r\n    private initPos: cc.Vec3 = null;\r\n    private initParent: cc.Node = null;\r\n\r\n    onLoad() {\r\n        this.initPos = this.node.position;\r\n        this.initParent = this.node.parent;\r\n    }\r\n\r\n    private onDragStart(event) {\r\n        let pos = event.target.parent.convertToWorldSpaceAR(cc.v2(event.pos.x, event.pos.y));\r\n    }\r\n\r\n    private onDragMove(event) {\r\n        let pos = event.target.parent.convertToWorldSpaceAR(cc.v2(event.pos.x, event.pos.y));\r\n        ListenerManager.dispatch(EventType.GAME_MAOZI_DRAG, pos);\r\n    }\r\n\r\n    private onDragEnd(event) {\r\n        let pos = event.target.parent.convertToWorldSpaceAR(cc.v2(event.pos.x, event.pos.y));\r\n        let isInRect: boolean = false;\r\n        this.fillArea.forEach(gezi => {\r\n            if (gezi.getComponent(GameMaozi).isPosInRect(cc.v2(pos.x, pos.y))) {\r\n                isInRect = true;\r\n                gezi.getComponent(GameMaozi).fill(this.node);\r\n            }\r\n        });\r\n        if (!isInRect) {\r\n            this.node.parent = this.initParent;\r\n            this.node.position = this.initPos;\r\n        }\r\n        ListenerManager.dispatch(EventType.GAME_MAOZI_DRAG_END);\r\n    }\r\n\r\n    public reset() {\r\n        this.node.parent = this.initParent;\r\n        this.node.position = this.initPos;\r\n    }\r\n\r\n    public getIndex(): number {\r\n        return this.index;\r\n    }\r\n}\r\n"]}