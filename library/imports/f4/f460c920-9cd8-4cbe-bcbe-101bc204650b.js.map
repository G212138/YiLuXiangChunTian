{"version":3,"sources":["assets\\game\\scripts\\UI\\Item\\Game_1_Type.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { HitTest } from \"../../../../frame/scripts/Utils/HitTest\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Game_1_Type extends cc.Component {\r\n\r\n    @property(cc.Integer)\r\n    private index: number = 0;\r\n    @property(cc.Node)\r\n    private icon: cc.Node[] = [];\r\n\r\n    private _initPos: cc.Vec3 = null;\r\n    private _isCurrent: boolean = false;\r\n    private _curPointIndex: number = null;\r\n    private graphics: cc.Graphics = null;\r\n    private _isDrawing: boolean = false;\r\n    private lineArr: number[][] = [];\r\n\r\n    onLoad() {\r\n        this._initPos = this.node.position;\r\n        this.graphics = this.node.getChildByName(\"dragLine_node\").getComponent(cc.Graphics);\r\n    }\r\n\r\n    public setIsCurrent(value: boolean) {\r\n        this._isCurrent = value;\r\n        this.node.getChildByName(\"highLight\").active = value;\r\n    }\r\n\r\n    public getIsCurrent(): boolean {\r\n        return this._isCurrent;\r\n    }\r\n\r\n    public getIndex(): number {\r\n        return this.index;\r\n    }\r\n\r\n    private onDragStart(data: any) {\r\n        let pos = data.target.parent.convertToWorldSpaceAR(cc.v2(data.pos.x, data.pos.y));\r\n        this.icon.forEach((item) => {\r\n            if (this.isPosInRect(pos, item) && (this._curPointIndex == null || this._curPointIndex == Number(item.name))) {\r\n                item.getChildByName(\"icon_check\").active = true;\r\n                item.getChildByName(\"icon_check\").scale = 0;\r\n                cc.tween(item.getChildByName(\"icon_check\")).to(0.2, { scale: 1 }, { easing: 'backOut' }).start();\r\n                this._curPointIndex = Number(item.name);\r\n                this._isDrawing = true;\r\n                let linePos = this.node.getChildByName(\"dragLine_node\").convertToNodeSpaceAR(pos);\r\n                this.graphics.moveTo(linePos.x, linePos.y);\r\n                this.graphics.strokeColor = cc.Color.RED;\r\n                this.graphics.fillColor = cc.Color.RED;\r\n                this.graphics.lineWidth = 10;\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    private onDragMove(data: any) {        \r\n        let pos = data.target.parent.convertToWorldSpaceAR(cc.v2(data.pos.x, data.pos.y));\r\n        if (this._isDrawing) {\r\n            let linePos = this.node.getChildByName(\"dragLine_node\").convertToNodeSpaceAR(pos);\r\n            this.graphics.lineTo(linePos.x, linePos.y);\r\n            this.graphics.stroke();\r\n        }\r\n        this.icon.forEach((item) => {\r\n            if (this.isPosInRect(pos, item) && (this._curPointIndex != Number(item.name))) {\r\n                console.log(\"画线成功\");\r\n                let lineArr = [this._curPointIndex, Number(item.name)];\r\n                if (this.lineArr.length > 0) {\r\n                    let isExist = false;\r\n                    this.lineArr.forEach((item) => {\r\n                        if (item[0] == lineArr[0] && item[1] == lineArr[1]) {\r\n                            isExist = true;\r\n                        }\r\n                    });\r\n                    if (!isExist) {\r\n                        this.lineArr.push(lineArr);\r\n                    }\r\n                } else {\r\n                    this.lineArr.push(lineArr);\r\n                }\r\n                this._curPointIndex = Number(item.name);    \r\n                if (item.getChildByName(\"icon_check\").active == false) {\r\n                    item.getChildByName(\"icon_check\").active = true;\r\n                    item.getChildByName(\"icon_check\").scale = 0;\r\n                    cc.tween(item.getChildByName(\"icon_check\")).to(0.2, { scale: 1 }, { easing: 'backOut' }).start();\r\n                    this._curPointIndex = Number(item.name);\r\n                }                \r\n            } else {\r\n                item.getChildByName(\"icon_check\").active = false;\r\n            }\r\n        });\r\n    }\r\n\r\n    private onDragEnd(data: any) {\r\n        this._isDrawing = false;\r\n        this.icon.forEach((item) => {\r\n            item.getChildByName(\"icon_check\").active = false;\r\n        });\r\n        let pos = data.target.parent.convertToWorldSpaceAR(cc.v2(data.pos.x, data.pos.y));\r\n        data.target.position = cc.Vec3.ZERO;\r\n        data.target.parent = this.node;\r\n        console.log(\"onDragEnd\", this.lineArr);\r\n    }\r\n\r\n    private isPosInRect(pos: cc.Vec2, point: cc.Node): boolean {\r\n        return HitTest.posInRect(new cc.Vec2(pos.x, pos.y), point);\r\n    }\r\n\r\n\r\n}\r\n"]}