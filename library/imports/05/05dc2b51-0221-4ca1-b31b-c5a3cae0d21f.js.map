{"version":3,"sources":["assets\\frame\\scripts\\Manager\\ListenerManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["interface IEventData {\n    func: Function;\n    target: any;\n}\n\ninterface IEvent {\n    [eventName: string]: IEventData[];\n}\n\nclass ListenerManagerClass {\n    private static _instance: ListenerManagerClass = null;\n    private handle: IEvent = {};\n\n    public static getInstance(): ListenerManagerClass {\n        if (null === this._instance) {\n            this._instance = new ListenerManagerClass();\n        }\n        return this._instance;\n    }\n\n    public on(eventName: string, cb: Function, target: any) {\n        if (this.hasEvent(eventName, cb, target)) {\n            return;\n        }\n\n        if (!this.handle[eventName]) {\n            this.handle[eventName] = [];\n        }\n        const data: IEventData = { func: cb, target };\n        this.handle[eventName].push(data);\n    }\n\n    public off(eventName: string, cb: Function, target?: any) {\n        const list = this.handle[eventName];\n        if (!list || list.length <= 0) {\n            return;\n        }\n        for (let i = 0; i < list.length; i++) {\n            const event = list[i];\n            if (cb == event.func && (!target || target == event.target)) {\n                list.splice(i, 1);\n                break;\n            }\n        }\n    }\n\n    public dispatch(eventName: string, ...args: any) {\n        const list = this.handle[eventName];\n        if (!list || list.length <= 0) {\n            return;\n        }\n        for (let i = 0; i < list.length; i++) {\n            const event = list[i];\n            event.func.apply(event.target, args);\n        }\n    }\n\n    public removeAll(target?: any) {\n        if (target) {\n            for (let key in this.handle) {\n                let list = this.handle[key];\n                for (let i = 0, l = list.length; i < l; i++) {\n                    let event = list[i];\n                    if (event.target == target) {\n                        list.splice(i, 1);\n                        if (l > 0) {\n                            l--;\n                        }\n                        i--;\n                    }\n                }\n            }\n        } else {\n            for (let key in this.handle) {\n                const list = this.handle[key];\n                while (list.length > 0) {\n                    list.pop();\n                }\n            }\n        }\n    }\n\n    public hasEvent(eventName: string, cb: Function, target?: any): boolean {\n        const list = this.handle[eventName];\n        if (!list || list.length <= 0) {\n            return false;\n        }\n        for (let i = 0; i < list.length; i++) {\n            const event = list[i];\n            if (cb == event.func && (!target || target == event.target)) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\nexport const ListenerManager = ListenerManagerClass.getInstance();\n"]}