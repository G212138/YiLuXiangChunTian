{"version":3,"sources":["assets\\frame\\scripts\\UI\\Panel\\SubmissionPanel.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { NetWork } from '../../Http/NetWork';\nimport BaseFrameUI from '../BaseFrameUI';\nimport { UIHelp } from '../../Utils/UIHelp';\nimport { ConstValue } from '../../../../game/scripts/Data/ConstValue';\nimport { EditorManager } from '../../../../game/scripts/Manager/EditorManager';\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class SubmissionPanel extends BaseFrameUI {\n    public static className = 'SubmissionPanel';\n    start() {}\n\n    onQueDingBtnClick(event) {\n        this.DetectionNet();\n    }\n\n    onQuXiaoBtnClick(event) {\n        UIHelp.closeSubmissionPanel();\n    }\n\n    //提交或者修改答案\n    DetectionNet() {\n        if (!NetWork.titleId) {\n            UIHelp.showErrorPanel('titleId为空,请联系技术老师解决！\\ntitleId=' + NetWork.titleId, '', '', '确定');\n            return;\n        }\n        let data = JSON.stringify({\n            CoursewareKey: ConstValue.CoursewareKey,\n            data: EditorManager.getData(),\n        });\n        NetWork.httpRequest(\n            NetWork.GET_TITLE + '?title_id=' + NetWork.titleId,\n            'GET',\n            'application/json;charset=utf-8',\n            (err, response) => {\n                if (!err) {\n                    if (response.data.courseware_content == null || response.data.courseware_content == '') {\n                        this.AddNet(data);\n                    } else {\n                        NetWork.coursewareId = response.data.courseware_id;\n                        let res = JSON.parse(response.data.courseware_content);\n                        if (!NetWork.empty) {\n                            if (res.CoursewareKey == ConstValue.CoursewareKey) {\n                                this.ModifyNet(data);\n                            } else {\n                                UIHelp.showErrorPanel(\n                                    '该titleId已被使用,请联系技术老师解决！\\ntitleId=' + NetWork.titleId,\n                                    '',\n                                    '',\n                                    '确定',\n                                );\n                            }\n                        }\n                    }\n                }\n            },\n            null,\n        );\n    }\n\n    //添加答案信息\n    AddNet(gameDataJson) {\n        let data = {\n            title_id: NetWork.titleId,\n            courseware_content: gameDataJson,\n            is_result: 1,\n            is_lavel: 1,\n            lavel_num: EditorManager.getLevelCount(),\n        };\n        NetWork.httpRequest(\n            NetWork.ADD,\n            'POST',\n            'application/json;charset=utf-8',\n            (err, response) => {\n                if (!err) {\n                    UIHelp.showTip('答案提交成功');\n                    UIHelp.closeSubmissionPanel();\n                }\n            },\n            JSON.stringify(data),\n        );\n    }\n\n    //修改课件\n    ModifyNet(gameDataJson) {\n        let jsonData = {\n            courseware_id: NetWork.coursewareId,\n            courseware_content: gameDataJson,\n            is_result: 1,\n            is_lavel: 1,\n            lavel_num: EditorManager.getLevelCount(),\n        };\n        NetWork.httpRequest(\n            NetWork.MODIFY,\n            'POST',\n            'application/json;charset=utf-8',\n            (err, response) => {\n                if (!err) {\n                    UIHelp.showTip('答案修改成功');\n                    UIHelp.closeSubmissionPanel();\n                }\n            },\n            JSON.stringify(jsonData),\n        );\n    }\n}\n"]}