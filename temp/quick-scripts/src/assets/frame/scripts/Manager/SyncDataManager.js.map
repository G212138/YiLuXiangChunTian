{"version":3,"sources":["assets\\frame\\scripts\\Manager\\SyncDataManager.ts"],"names":[],"mappings":";;;;;AAAA;;GAEG;;;AAEH,2EAA0E;AAC1E,8EAA6E;AAC7E,4EAA2E;AAE3E;;;GAGG;AACH;IAAA;QACW,eAAU,GAAQ,IAAI,CAAC,CAAC,OAAO;QAC/B,mBAAc,GAAmB,IAAI,+BAAc,EAAE,CAAC,CAAC,UAAU;QACjE,kBAAa,GAAkB,IAAI,6BAAa,EAAE,CAAC,CAAC,WAAW;IAC1E,CAAC;IAAD,eAAC;AAAD,CAJA,AAIC,IAAA;AAJY,4BAAQ;AAKrB;IAAA;QAUI,WAAW;QACH,cAAS,GAAa,IAAI,QAAQ,EAAE,CAAC;IAgCjD,CAAC;IAxCiB,gCAAW,GAAzB;QACI,IAAI,IAAI,KAAK,IAAI,CAAC,SAAS,EAAE;YACzB,IAAI,CAAC,SAAS,GAAG,IAAI,oBAAoB,EAAE,CAAC;SAC/C;QACD,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAID,sBAAW,0CAAQ;aAGnB;YACI,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;QAC9B,CAAC;aALD,UAAoB,IAAc;YAC9B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC3B,CAAC;;;OAAA;IAKM,2CAAY,GAAnB;QACI,IAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC;IACpC,CAAC;IAEM,0CAAW,GAAlB;QACI,IAAI,CAAC,SAAS,CAAC,UAAU,GAAG,6BAAa,CAAC,WAAW,EAAE,CAAC;QACxD,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAEM,0CAAW,GAAlB,UAAmB,IAAc;QAC7B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,6BAAa,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAC/C,CAAC;IAED;;OAEG;IACI,qCAAM,GAAb;QACI,IAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,QAAQ,CAAC;QACvD,IAAM,WAAW,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,cAAc,GAAG,CAAC,CAAC;QACpE,IAAI,CAAC,SAAS,GAAG,IAAI,QAAQ,EAAE,CAAC;QAChC,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,QAAQ,GAAG,QAAQ,CAAC;QACjD,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,cAAc,GAAG,WAAW,CAAC;IAC9D,CAAC;IAzCc,8BAAS,GAAyB,IAAI,CAAC;IA0C1D,2BAAC;CA3CD,AA2CC,IAAA;AAEY,QAAA,eAAe,GAAG,oBAAoB,CAAC,WAAW,EAAE,CAAC","file":"","sourceRoot":"/","sourcesContent":["/**\n * 同步数据\n */\n\nimport { FrameSyncData } from '../../../frame/scripts/Data/FrameSyncData';\nimport { ReportManager } from '../../../frame/scripts/Manager/ReportManager';\nimport { CustomSyncData } from '../../../game/scripts/Data/CustomSyncData';\n\n/**\n * 需要同步的数据\n * 自定义数据不要在这里实现，请在 CustomSyncData 中实现\n */\nexport class SyncData {\n    public reportData: any = null; // 上报数据\n    public customSyncData: CustomSyncData = new CustomSyncData(); // 自定义同步数据\n    public frameSyncData: FrameSyncData = new FrameSyncData(); // 框架中的同步数据\n}\nclass SyncDataManagerClass {\n    private static _instance: SyncDataManagerClass = null;\n\n    public static getInstance(): SyncDataManagerClass {\n        if (null === this._instance) {\n            this._instance = new SyncDataManagerClass();\n        }\n        return this._instance;\n    }\n\n    /** 同步数据 */\n    private _syncData: SyncData = new SyncData();\n    public set syncData(data: SyncData) {\n        this.setSyncData(data);\n    }\n    public get syncData() {\n        return this.getSyncData();\n    }\n\n    public initSyncData() {\n        this._syncData = new SyncData();\n    }\n\n    public getSyncData(): SyncData {\n        this._syncData.reportData = ReportManager.getSyncData();\n        return this._syncData;\n    }\n\n    public setSyncData(data: SyncData) {\n        this._syncData = data;\n        ReportManager.setSyncData(data.reportData);\n    }\n\n    /**\n     * 重玩\n     */\n    public replay() {\n        const actionId = this._syncData.frameSyncData.actionId;\n        const replayCount = this._syncData.frameSyncData.hasReplayCount + 1;\n        this._syncData = new SyncData();\n        this._syncData.frameSyncData.actionId = actionId;\n        this._syncData.frameSyncData.hasReplayCount = replayCount;\n    }\n}\n\nexport const SyncDataManager = SyncDataManagerClass.getInstance();\n"]}