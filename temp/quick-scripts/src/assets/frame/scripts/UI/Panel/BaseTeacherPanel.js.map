{"version":3,"sources":["assets\\frame\\scripts\\UI\\Panel\\BaseTeacherPanel.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,uEAAsE;AACtE,gFAA+E;AAC/E,8CAA6C;AAC7C,6CAA4C;AAC5C,oCAAmC;AAE7B,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA8C,oCAAM;IAApD;;IAsEA,CAAC;IApEG,iCAAM,GAAN,cAAU,CAAC;IAEX,gCAAK,GAAL;QACI,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClD,IAAI,CAAC,MAAM,EAAE,CAAC;QACd,eAAM,CAAC,gBAAgB,EAAE,CAAC;IAC9B,CAAC;IAEM,mCAAQ,GAAf,cAAmB,CAAC;IAEZ,iCAAM,GAAd;QAAA,iBAwCC;QAvCG,iBAAO,CAAC,WAAW,CACf,iBAAO,CAAC,SAAS,GAAG,YAAY,GAAG,iBAAO,CAAC,OAAO,EAClD,KAAK,EACL,gCAAgC,EAChC,UAAC,GAAG,EAAE,QAAQ;YACV,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,QAAQ,CAAC,CAAC;YAC/B,IAAI,CAAC,GAAG,EAAE;gBACN,IAAI,GAAG,GAAG,QAAQ,CAAC;gBACnB,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;oBACzB,KAAI,CAAC,QAAQ,EAAE,CAAC;oBAChB,OAAO;iBACV;gBACD,IAAI,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC;gBACtD,iBAAO,CAAC,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,aAAa,CAAC;gBAC9C,IAAI,iBAAO,CAAC,KAAK,EAAE;oBACf,mCAAmC;oBACnC,KAAI,CAAC,QAAQ,EAAE,CAAC;iBACnB;qBAAM;oBACH,IAAI,OAAO,IAAI,IAAI,EAAE;wBACjB,IAAI,OAAO,CAAC,aAAa,IAAI,uBAAU,CAAC,aAAa,EAAE;4BACnD,eAAM,CAAC,cAAc,CACjB,mCAAmC,GAAG,iBAAO,CAAC,OAAO,EACrD,EAAE,EACF,EAAE,EACF,IAAI,CACP,CAAC;4BACF,OAAO;yBACV;wBACD,mBAAmB;wBACnB,6BAAa,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;wBACpC,KAAI,CAAC,QAAQ,EAAE,CAAC;qBACnB;yBAAM;wBACH,KAAI,CAAC,QAAQ,EAAE,CAAC;qBACnB;iBACJ;aACJ;QACL,CAAC,EACD,IAAI,CACP,CAAC;IACN,CAAC;IAED,kBAAkB;IAClB,mCAAQ,GAAR;QACI,IAAI,QAAQ,GAAG,EAAE,aAAa,EAAE,iBAAO,CAAC,YAAY,EAAE,CAAC;QACvD,iBAAO,CAAC,WAAW,CACf,iBAAO,CAAC,KAAK,EACb,MAAM,EACN,gCAAgC,EAChC,UAAC,GAAG,EAAE,QAAQ;YACV,IAAI,CAAC,GAAG,EAAE;gBACN,eAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;aAC5B;QACL,CAAC,EACD,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAC3B,CAAC;IACN,CAAC;IAnEa,0BAAS,GAAG,kBAAkB,CAAC;IAD5B,gBAAgB;QADpC,OAAO;OACa,gBAAgB,CAsEpC;IAAD,uBAAC;CAtED,AAsEC,CAtE6C,eAAM,GAsEnD;kBAtEoB,gBAAgB","file":"","sourceRoot":"/","sourcesContent":["import { ConstValue } from '../../../../game/scripts/Data/ConstValue';\nimport { EditorManager } from '../../../../game/scripts/Manager/EditorManager';\nimport { NetWork } from '../../Http/NetWork';\nimport { UIHelp } from '../../Utils/UIHelp';\nimport { BaseUI } from '../BaseUI';\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class BaseTeacherPanel extends BaseUI {\n    public static className = 'BaseTeacherPanel';\n    onLoad() {}\n\n    start() {\n        this.data.node.parent.removeChild(this.data.node);\n        this.getNet();\n        UIHelp.closeRecoverMask();\n    }\n\n    public setPanel() {}\n\n    private getNet() {\n        NetWork.httpRequest(\n            NetWork.GET_TITLE + '?title_id=' + NetWork.titleId,\n            'GET',\n            'application/json;charset=utf-8',\n            (err, response) => {\n                console.log('消息返回' + response);\n                if (!err) {\n                    let res = response;\n                    if (Array.isArray(res.data)) {\n                        this.setPanel();\n                        return;\n                    }\n                    let content = JSON.parse(res.data.courseware_content);\n                    NetWork.coursewareId = res.data.courseware_id;\n                    if (NetWork.empty) {\n                        //如果URL里面带了empty参数 并且为true  就立刻清除数据\n                        this.ClearNet();\n                    } else {\n                        if (content != null) {\n                            if (content.CoursewareKey != ConstValue.CoursewareKey) {\n                                UIHelp.showErrorPanel(\n                                    '该titleId已被使用,请联系技术老师解决！\\ntitleId=' + NetWork.titleId,\n                                    '',\n                                    '',\n                                    '确定',\n                                );\n                                return;\n                            }\n                            // 如果编辑器数据修改 先注释掉此行\n                            EditorManager.setData(content.data);\n                            this.setPanel();\n                        } else {\n                            this.setPanel();\n                        }\n                    }\n                }\n            },\n            null,\n        );\n    }\n\n    //删除课件数据  一般为脏数据清理\n    ClearNet() {\n        let jsonData = { courseware_id: NetWork.coursewareId };\n        NetWork.httpRequest(\n            NetWork.CLEAR,\n            'POST',\n            'application/json;charset=utf-8',\n            (err, response) => {\n                if (!err) {\n                    UIHelp.showTip('答案删除成功');\n                }\n            },\n            JSON.stringify(jsonData),\n        );\n    }\n    // update (dt) {}\n}\n"]}